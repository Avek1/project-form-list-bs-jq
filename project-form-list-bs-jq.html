<! DOCTYPE html>
<html lang="en">
<head xmlns="http://www.w3.org/1999/xhtml">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, intial-scale=1" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style>
        /*#inputForm {
            border-style: solid;
            border-width: 1px;
            padding: 10px;
        }*/
    </style>
</head>
<body>

    <div class="container">
        <div class="navbar navbar-inverse">
            <!-- empty for now -->
        </div>
        <!-- begin row -->
        <div class="row">
            <div class="col-md-12">
                <h2>Bootstrap Form & List</h2>
                <p>Welcome to my basic web page.</p>
                <p>Here you can:</p>
                <ul>
                    <li>input data to a form</li>
                    <li>print your data to "sheet"</li>
                    <li>edit your data</li>
                    <li>delete your data</li>
                </ul>
            </div>
        </div>
        <!-- end row -->
        <!-- begin row -->
        <div class="row">
            <div class="col-md-6">
                <div class="panel panel-primary">
                    <div class="panel-heading">Input Form</div>
                    <div class="panel-body">
                        <form id="inputForm">
                            <div class="form-group">
                                <label>First Name</label>
                                <input class="form-control" id="firstName" />
                            </div>
                            <div class="form-group">
                                <label>Last Name</label>
                                <input class="form-control" id="lastName" />
                            </div>
                            <div class="form-group">
                                <label>Email</label>
                                <input type="email" class="form-control" id="email" />
                            </div>
                            <button type="submit" class="btn btn-default pull-right" id="submitBtn">Submit</button>
                        </form>
                    </div>
                   
                </div>
               
            </div>
            <div class="col-md-6" id="user-list">
             
            </div>
        </div>
        <!-- end row -->
    </div>

    <script type="text/javascript">
        var juan = {};
        $(document).ready(function () {
            $("#submitBtn").on("click", juan.submitForm);
            $("#user-list").on("click", "div#infoPanel", juan.recallInfo);
            $("#deleteBtn").on("click", juan.deleteInfo);
        });


        juan.submitForm = function () {
            event.preventDefault();
            var parentID = $(this).closest("").attr("newid");
            console.log("submitForm function");
            if (!parentID) {
                var $newUser = $($("#user-info-template").html());
                $newUser.find("#showFN").text($("#firstName").val());
                $newUser.find("#showLN").text($("#lastName").val());
                $newUser.find("#showEm").text($("#email").val());
                $newUser.attr("newID", Math.ceil(Math.random() * 100000));
                $("#user-list").append($newUser);
                juan.clearForm();
            }
            else {
                console.log("make some shit");
            }
                     
        }

        juan.clearForm = function () {
            $("#inputForm")[0].reset();     // $("#inputForm :input").val("");  
        }

        juan.recallInfo = function () {
            console.log("recallInfo function");
            var $repop = $($(this).closest("#infoPanel").html()); // this was not working because i was targeting user-list which is part of the html not the template.
            var repopObj = {};
            repopObj.firstName = $repop.find("#showFN").text();
            repopObj.lastName = $repop.find("#showLN").text();
            repopObj.email = $repop.find("#showEm").text();
            $("#firstName").val(repopObj.firstName);
            $("#lastName").val(repopObj.lastName);
            $("#email").val(repopObj.email);
            var parentID = $(this).closest(".user-list").attr("id");

            // $($(this).closest(".user-list").html());  // this targets template element



            // $($(this).closest(".user-list").html($("#firstName").val($("#showFN").text())));
            // $($(this).closest(".user-list").html($("#lastName").val($("#showLN").text())));
            // $($(this).closest(".user-list").html($("#email").val($("#showEm").text())));
            // var parentID = $(this).closest(".user-list").attr("id");

        }
  
        juan.updateInfo = function () {
            event.preventDefault();
        }
        juan.deleteInfo = function () {
            console.log("delete function.");
            $("#showFN").text("");
            $("#showLN").text("");
            $("#showEm").text("");
        }
    </script>

    <script type="text/html" id="user-info-template">
        <div class="panel panel-primary" id="infoPanel">
            <div class="panel-heading">User Info:</div>
            <div class="panel-body">
                <p>First Name: <span id="showFN"></span></p>
                <p>Last Name: <span id="showLN"></span></p>
                <p>Email: <span id="showEm"></span></p>
                <button type="button" class="btn btn-default pull-right" id="deleteBtn">Delete</button>
                <button type="button" class="btn btn-default pull-right" id="editBtn">Edit</button>
            </div>
        </div>
    </script>
</body>
</html>
